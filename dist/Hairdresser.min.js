!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hairdresser=e():t.Hairdresser=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return t.parentNode!==document.head?!1:e.each(function(e,n){return t.getAttribute(e)===n})}e.__esModule=!0;var s,u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),l=r(a),c=n(3),f=n(2),d=r(f),p=n(4),h=r(p),v=n(6),_=r(v),m=(s={},s[h.default.CTRL_TYPE.TITLE]=function(t,e){l.default("string"==typeof e,"render value for <title> must be a string")},s[h.default.CTRL_TYPE.ETC]=function(t,e){l.default("object"==typeof e,"render value for <"+t+"> must be an object")},s),L=function(){function t(){function e(t){l.default(!t.addListener||t.removeListener,"addListener requires removeListener"),this.addListener=t.addListener,this.removeListener=t.removeListener,this.controllers=[],this.id=i()}o(this,t);var n=this._topControllers={},r=this._observerList=[],i=c.createIdGenerator(),s=c.createIdGenerator(),u=function(t,e){l.default(e instanceof h.default,"controller must be an instance of Controller"),e.override=t,t.controllers.push(e),e.id=s();var o=n[e.selector];o&&o.insertAfter(e),n[e.selector]=e,r.forEach(function(t){t.onAddController(e)})};e.prototype.getController=function(t,e){for(var n=t+(e?d.default.toSelector(e):""),r=this.controllers.length-1;r>=0;--r){var o=this.controllers[r];if(o.selector===n)return o}return null},e.prototype.addController=function(t,e,n,r){var o=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],i=void 0;"function"!=typeof r?(m[t](e,r),i=function(){return r}):i=r;var s=new h.default(t,e,n,i,o);return u(this,s),this},e.prototype.title=function(t,e){return this.addController(h.default.CTRL_TYPE.TITLE,"title",{},t,e)},e.prototype.meta=function(t,e,n){return this.addController(h.default.CTRL_TYPE.ETC,"meta",t,e,n)},e.prototype.link=function(t,e,n){return this.addController(h.default.CTRL_TYPE.ETC,"link",t,e,n)},e.prototype.update=function(){var t=this;r.forEach(function(e){e.onUpdate(t)})},e.prototype.restore=function(){var t=this;r.forEach(function(e){e.onPreRemoveOverride(t)}),this.controllers.forEach(function(t){t.prev?n[t.selector]=t.prev:delete n[t.selector],t.unlink()})},this.Override=e}return t.create=function(){return new t},u(t,null,[{key:"Controller",get:function(){return h.default}}]),t.prototype._getActiveController=function(t,e){var n=t+(e?d.default.toSelector(e):"");return this._topControllers[n]},t.prototype._getActiveControllers=function(){var t=this;return Object.keys(this._topControllers).sort().map(function(e){return t._topControllers[e]})},t.prototype._addObserver=function(t){var e=this;return this._observerList.push(t),function(){c.removeItem(e._observerList,t)}},t.prototype.override=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return new this.Override(t)},t.prototype._renderOnce=function(t){this._getActiveControllers().forEach(function(e){t[e.type].onUpdate(e)})},t.prototype._renderAndListen=function(t){var e=_.default(t),n=e.startListeningController,r=e.stopListeningController,o=e.isControllerListening,i=e.removeController,s=e.updateOverride,u=e.removeOverride,a=e.destroy;this._getActiveControllers().forEach(n);var l=this._addObserver({onAddController:function(t){t.prev&&r(t.prev),n(t)},onUpdate:function(t){s(t)},onPreRemoveOverride:function(t){t.controllers.forEach(function(t){o(t)&&(r(t),t.prev&&n(t.prev)),i(t)}),u(t)}});return function(){l(),a()}},t.prototype.renderToString=function(){var t,e=[];return this._renderOnce((t={},t[h.default.CTRL_TYPE.TITLE]={onUpdate:function(t){var n=t.render();m[h.default.CTRL_TYPE.TITLE](t.tagName,n),e.push("<title>"+n+"</title>")}},t[h.default.CTRL_TYPE.ETC]={onUpdate:function(t){var n=t.render();m[h.default.CTRL_TYPE.ETC](t.tagName,n),e.push("<"+t.tagName+" "+t.attrs.html+" "+d.default.toHtml(n)+">")}},t)),e.join("")},t.prototype.render=function(){function t(t){var e=r[t.id];return e?i(e,t.attrs)?e:(delete r[t.id],null):null}function e(e){var n=t(e);return n?n:(n=document.head.querySelector(""+e.selector))?(r[e.id]=n,n):(n=document.createElement(e.tagName),e.attrs.each(function(t,e){n.setAttribute(t,e)}),document.head.appendChild(n),r[e.id]=n,n)}var n;l.default(c.canUseDOM(),"Cannot use DOM object. Make sure `window` and `document` are available globally.");var r={},o=document.title;return this._renderAndListen((n={},n[h.default.CTRL_TYPE.TITLE]={onUpdate:function(t){var e=t.render();m[h.default.CTRL_TYPE.TITLE](t.tagName,e),document.title=e},onStop:function(t){t.prev||t.next||(document.title=o)}},n[h.default.CTRL_TYPE.ETC]={onUpdate:function(t){var n=e(t),r=t.render();m[h.default.CTRL_TYPE.ETC](t.tagName,r),Object.keys(r).forEach(function(t){n.setAttribute(t,r[t])})},onStop:function(e){if(!e.prev&&!e.next){var n=t(e);n&&n.parentNode.removeChild(n)}}},n))},t}();e.default=L,t.exports=e.default},function(t,e,n){"use strict";var r=function(t,e,n,r,o,i,s,u){if(!t){var a;if(void 0===e)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,i,s,u],c=0;a=new Error("Invariant Violation: "+e.replace(/%s/g,function(){return l[c++]}))}throw a.framesToPop=1,a}};t.exports=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this._data=e,this._attrNames=Object.keys(this._data).sort(),this._attrNamesLen=this._attrNames.length,this.html=t._toHtml(this._attrNames,this._data),this.selector=t._toSelector(this._attrNames,this._data)}return t._toHtml=function(t,e){return t.map(function(t){return t+'="'+e[t]+'"'}).join(" ")},t.toHtml=function(e){return t._toHtml(Object.keys(e).sort(),e)},t._toSelector=function(t,e){return t.map(function(t){return"["+t+"='"+e[t]+"']"}).join("")},t.toSelector=function(e){return t._toSelector(Object.keys(e).sort(),e)},t.prototype.each=function(t){for(var e=0;e<this._attrNamesLen;++e){var n=this._attrNames[e];if(t(n,this._data[n])===!1)return!1}return!0},t}();e.default=r,t.exports=e.default},function(t,e){"use strict";function n(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}function r(){var t=0;return function(){return++t}}function o(){return"undefined"!=typeof document}e.__esModule=!0,e.default={removeItem:n,createIdGenerator:r,canUseDOM:o},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),a=r(u),l=n(2),c=r(l),f=n(5),d=r(f),p=function(t){function e(n,r,i,s){var u=arguments.length<=4||void 0===arguments[4]?{}:arguments[4];o(this,e),t.call(this),a.default("function"==typeof s,"render function is required"),a.default(!u.addListener||u.removeListener,"addListener requires removeListener"),this.type=n,this.attrs=new c.default(i),this.tagName=r,this.selector=this.tagName+this.attrs.selector,this.render=s,this.addListener=u.addListener,this.removeListener=u.removeListener}return i(e,t),s(e,null,[{key:"CTRL_TYPE",get:function(){return{TITLE:"title",ETC:"etc"}}}]),e}(d.default);e.default=p,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){t&&(t.next=e),e&&(e.prev=t)}e.__esModule=!0;var o=function(){function t(){n(this,t)}return t.prototype.insertAfter=function(t){r(t,this.next),r(this,t)},t.prototype.unlink=function(){r(this.prev,this.next),this.prev=void 0,this.next=void 0},t}();e.default=o,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){function e(t){var e=h[t.id];return e||(e=h[t.id]=new l(t)),e}function n(t){return v[t.id]}function r(r){var o=n(r);if(o)return o;var i=e(r.override);return o=v[r.id]=new c({controller:r,overrideListener:i,handler:t[r.type]})}function o(t){var e=n(t);return e?e.isListening():!1}function i(t){var e=r(t);e.onUpdate().startListening()}function s(t){u.default(o(t),"Only listening controller can be stopped");var e=n(t);e.stopListening().onStop()}function a(t){var e=n(t);e&&(u.default(e.isReadyToRemove(),"ControllerListener is not ready to remove"),delete v[t.id])}function f(t){var e=h[t.id];e&&e.onUpdate()}function d(t){var e=h[t.id];e&&(u.default(e.isReadyToRemove(),"OverrideListener is not ready to remove"),delete h[t.id])}function p(){Object.keys(v).map(function(t){return v[t]}).filter(function(t){return t.isListening()}).forEach(function(t){t.stopListening().onStop()})}var h={},v={};return{startListeningController:i,stopListeningController:s,isControllerListening:o,removeController:a,updateOverride:f,removeOverride:d,destroy:p}}e.__esModule=!0,e.default=i;var s=n(1),u=r(s),a=n(3),l=function(){function t(e){o(this,t),this._controllerListeners=[],this._override=e,this.listening=!1}return t.prototype.onUpdate=function(){this._controllerListeners.forEach(function(t){return t.onUpdate()})},t.prototype.addControllerListener=function(t){var e=this;this._controllerListeners.push(t),this._override.addListener&&!this.listening&&(this.listening=!0,this._addListenerRet=this._override.addListener(function(){e.onUpdate()}))},t.prototype.removeControllerListener=function(t){a.removeItem(this._controllerListeners,t),this.listening&&0===this._controllerListeners.length&&(this._override.removeListener(this._addListenerRet),this.listening=!1)},t.prototype.isReadyToRemove=function(){return!this.listening&&0===this._controllerListeners.length},t}(),c=function(){function t(e){var n=e.controller,r=e.overrideListener,i=e.handler;o(this,t),this._overrideListener=r,this.controller=this._controller=n,this._onUpdate=i.onUpdate,this._onStop=i.onStop||function(){},this._listening=!1}return t.prototype.onUpdate=function(){return this._onUpdate(this._controller),this},t.prototype.onStop=function(){return this._onStop(this._controller),this},t.prototype.startListening=function(){var t=this;return this._overrideListener.addControllerListener(this),this._controller.addListener&&(this._addListenerRet=this._controller.addListener(function(){t.onUpdate()})),this._listening=!0,this},t.prototype.stopListening=function(){return this._overrideListener.removeControllerListener(this),this._controller.removeListener&&this._controller.removeListener(this._addListenerRet),this._listening=!1,this},t.prototype.isListening=function(){return this._listening},t.prototype.isReadyToRemove=function(){return!this.isListening()},t}();t.exports=e.default}])});
//# sourceMappingURL=Hairdresser.min.js.map